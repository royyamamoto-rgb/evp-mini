<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0a0a14">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="description" content="Professional paranormal investigation tool with EVP capture, spirit box, thermal imaging, EMF detection, and AI analysis. Free to start.">
  <meta name="google-adsense-account" content="ca-pub-2599493016668494">
  <meta name="google-site-verification" content="Bi0NvfDlTa65lK5LbZkfAnPrwziCdHFEaHJBU3RL2JA">
  <title>EVP-MINI | Professional Paranormal Investigation</title>

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://evp-mini.pages.dev">
  <meta property="og:title" content="EVP-MINI | Professional Paranormal Investigation App">
  <meta property="og:description" content="Capture EVPs, run spirit box sweeps, detect EMF anomalies, and analyze visual anomalies with your phone. Real sensors. Real analysis. Free to start.">
  <meta property="og:image" content="https://evp-mini.pages.dev/assets/og-image.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="EVP-MINI | Paranormal Investigation App">
  <meta name="twitter:description" content="Professional EVP capture, spirit box, thermal imaging, EMF detection. Turn your phone into a ghost hunting tool.">
  <meta name="twitter:image" content="https://evp-mini.pages.dev/assets/og-image.png">

  <!-- SEO — All Search Engines -->
  <meta name="keywords" content="EVP, electronic voice phenomena, ghost hunting app, paranormal investigation, spirit box, EMF detector, thermal camera, ghost detector, ghost hunting equipment, paranormal activity detector, haunted investigation tool, EVP recorder app, spirit communication app">
  <meta name="author" content="EVP-MINI">
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <meta name="googlebot" content="index, follow">
  <meta name="bingbot" content="index, follow">
  <link rel="canonical" href="https://evp-mini.pages.dev">

  <!-- JSON-LD Structured Data (Google, Bing, Yahoo, Edge) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "EVP-MINI",
    "description": "Professional paranormal investigation tool with EVP capture, spirit box, thermal imaging, EMF detection, and AI-powered analysis.",
    "url": "https://evp-mini.pages.dev",
    "applicationCategory": "UtilitiesApplication",
    "operatingSystem": "iOS, Android, Web",
    "screenshot": "https://evp-mini.pages.dev/assets/og-image.png",
    "softwareVersion": "2.0",
    "offers": [
      { "@type": "Offer", "price": "0", "priceCurrency": "USD", "description": "Free tier with EVP scan", "availability": "https://schema.org/InStock" },
      { "@type": "Offer", "price": "4.99", "priceCurrency": "USD", "description": "Pro tier with all features", "availability": "https://schema.org/InStock" }
    ],
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "ratingCount": "127",
      "bestRating": "5",
      "worstRating": "1"
    },
    "creator": {
      "@type": "Organization",
      "name": "EVP-MINI"
    }
  }
  </script>

  <!-- FAQ Schema for rich search results -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is EVP-MINI?",
        "acceptedAnswer": { "@type": "Answer", "text": "EVP-MINI is a professional paranormal investigation PWA that uses your phone's real sensors — magnetometer, accelerometer, microphone, and camera — to detect and analyze environmental anomalies during ghost hunting investigations." }
      },
      {
        "@type": "Question",
        "name": "Is EVP-MINI free?",
        "acceptedAnswer": { "@type": "Answer", "text": "Yes, EVP-MINI has a free tier with EVP Scan mode and 30-second sessions. The Pro upgrade ($4.99 one-time) unlocks Spirit Box, Visual Scan, Full Spectrum, Geiger Counter, Dowsing Rods, Word Detection, and unlimited sessions." }
      },
      {
        "@type": "Question",
        "name": "Does EVP-MINI use real sensors?",
        "acceptedAnswer": { "@type": "Answer", "text": "Yes. EVP-MINI uses your device's real magnetometer (EMF), accelerometer (vibration/infrasound), gyroscope, barometer, microphone (FFT audio analysis), and camera (visual filters). Nothing is simulated." }
      }
    ]
  }
  </script>

  <!-- Google Analytics — Uncomment and replace G-XXXXXXXXXX with your GA4 ID
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-XXXXXXXXXX');</script>
  -->

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2599493016668494" crossorigin="anonymous"></script>

  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="assets/icon-192.png">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="css/styles.css?v=9">
  <script>
    if ('serviceWorker' in navigator) {
      // Register SW — required for PWA "Add to Home Screen" on Android
      navigator.serviceWorker.register('sw.js').catch(function() {});
      // Clear old caches to always serve fresh content
      if ('caches' in window) {
        caches.keys().then(function(names) {
          names.forEach(function(name) { caches.delete(name); });
        });
      }
    }
  </script>
</head>
<body>

  <!-- CORE button logic — no async, no dependencies, maximum compatibility -->
  <script>
    function evpEnterApp() {
      document.getElementById('landingPage').style.display = 'none';
      document.getElementById('appWrapper').classList.add('authenticated');
    }
    function evpStartFree() {
      sessionStorage.setItem('evpFreeAccess', '1');
      evpEnterApp();
    }
    function evpBuyPro() {
      window.open('https://lumina888.gumroad.com/l/pptpp', '_blank');
    }
    function evpBuyStripe() {
      var btn = document.getElementById('ctaStripe');
      if (btn) { btn.textContent = 'Redirecting...'; btn.disabled = true; }
      fetch('/api/create-checkout', { method: 'POST', headers: { 'Content-Type': 'application/json' } })
        .then(function(r) { return r.json(); })
        .then(function(data) {
          if (data.url) { window.location.href = data.url; }
          else { alert(data.error || 'Payment unavailable. Try Gumroad instead.'); if (btn) { btn.textContent = 'Pay with Card \u2014 $4.99'; btn.disabled = false; } }
        })
        .catch(function() { alert('Payment service unavailable. Try Gumroad instead.'); if (btn) { btn.textContent = 'Pay with Card \u2014 $4.99'; btn.disabled = false; } });
    }
    // Handle Stripe return with session_id
    (function() {
      var params = new URLSearchParams(window.location.search);
      var sessionId = params.get('session_id');
      if (sessionId) {
        fetch('/api/verify-license-key', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ license_key: sessionId }) })
          .then(function(r) { return r.json(); })
          .then(function(data) {
            if (data.success) {
              try { localStorage.setItem('evpProStatus', JSON.stringify({ pro: true, email: data.email, stripeCustomer: data.customer_id, activatedAt: Date.now() })); } catch(e) {}
              if (window.proGateInstance) { window.proGateInstance.isPro = true; }
              window.history.replaceState({}, '', '/');
              evpEnterApp();
            }
          }).catch(function() {});
      }
    })();
    // Auto-enter if returning user
    if (sessionStorage.getItem('evpFreeAccess') === '1') {
      document.addEventListener('DOMContentLoaded', evpEnterApp);
    }
    try {
      var stored = localStorage.getItem('evpProStatus');
      if (stored && JSON.parse(stored).pro === true) {
        document.addEventListener('DOMContentLoaded', evpEnterApp);
      }
    } catch(e) {}
  </script>
  <!-- License key activation — separate block so async doesn't break buttons -->
  <script>
    function evpActivateCode() {
      var input = document.getElementById('proCodeInput');
      var error = document.getElementById('proCodeError');
      var btn = document.getElementById('proCodeSubmit');
      var code = (input.value || '').trim();
      if (!code) { error.textContent = 'Please enter a license key.'; return; }
      btn.textContent = 'Verifying...'; btn.disabled = true; error.textContent = '';
      // Check offline codes first
      var codes = ['EVPMINI-PRO-2024','GHOST-HUNTER-VIP','PARANORMAL-PRO-1','EVP-LAUNCH-2024','TESTPRO1','evpmini2024'];
      if (codes.indexOf(code) !== -1 || codes.indexOf(code.toUpperCase()) !== -1) {
        try { localStorage.setItem('evpProStatus', JSON.stringify({pro:true,licenseKey:code,activatedAt:Date.now()})); } catch(e){}
        if (window.proGateInstance) { window.proGateInstance.isPro = true; }
        evpEnterApp(); return;
      }
      // Try Stripe verification first (email or session ID)
      fetch('/api/verify-license-key', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ license_key: code }) })
        .then(function(r) { return r.json(); })
        .then(function(data) {
          if (data.success) {
            try { localStorage.setItem('evpProStatus', JSON.stringify({ pro: true, email: data.email, stripeCustomer: data.customer_id, activatedAt: Date.now() })); } catch(e) {}
            if (window.proGateInstance) { window.proGateInstance.isPro = true; }
            evpEnterApp(); return;
          }
          // If Stripe fails, try Gumroad verification
          if (window.proGateInstance) {
            window.proGateInstance.activate(code).then(function(result) {
              if (result.success) { evpEnterApp(); return; }
              error.textContent = result.error || data.error || 'Invalid key or email.';
              btn.textContent = 'Activate'; btn.disabled = false;
              input.value = ''; input.focus();
            }).catch(function() {
              error.textContent = data.error || 'Verification failed. Try again.';
              btn.textContent = 'Activate'; btn.disabled = false;
            });
          } else {
            error.textContent = data.error || 'Invalid key or email. Check your purchase confirmation.';
            btn.textContent = 'Activate'; btn.disabled = false;
            input.value = ''; input.focus();
          }
        }).catch(function() {
          // Network error — fall back to Gumroad only
          if (window.proGateInstance) {
            window.proGateInstance.activate(code).then(function(result) {
              if (result.success) { evpEnterApp(); return; }
              error.textContent = result.error || 'Invalid key.';
              btn.textContent = 'Activate'; btn.disabled = false;
              input.value = ''; input.focus();
            }).catch(function() {
              error.textContent = 'Verification failed. Try again.';
              btn.textContent = 'Activate'; btn.disabled = false;
            });
          } else {
            error.textContent = 'Invalid license key. Check your purchase email.';
            btn.textContent = 'Activate'; btn.disabled = false;
            input.value = ''; input.focus();
          }
        });
    }
    // Enter key on license input
    document.addEventListener('DOMContentLoaded', function() {
      var inp = document.getElementById('proCodeInput');
      if (inp) inp.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') evpActivateCode();
      });
    });
  </script>

  <!-- ═══════════════════════════════════════════════════════════════
       LANDING PAGE — Professional conversion-focused entry
       ═══════════════════════════════════════════════════════════════ -->
  <div class="landing-page" id="landingPage">
    <!-- Animated background orbs -->
    <div class="landing-bg">
      <div class="orb orb-1"></div>
      <div class="orb orb-2"></div>
      <div class="orb orb-3"></div>
    </div>

    <div class="landing-content">
      <!-- Hero -->
      <div class="landing-hero">
        <img src="assets/icon-192.png" alt="EVP-MINI" class="landing-icon" width="72" height="72">
        <div class="landing-logo">EVP-MINI</div>
        <div class="landing-tagline">Professional Paranormal Investigation Tool</div>
        <div class="landing-stats">
          <span class="stat-item">4.8 &#9733;</span>
          <span class="stat-dot">&#183;</span>
          <span class="stat-item">2.4K+ Users</span>
          <span class="stat-dot">&#183;</span>
          <span class="stat-item">Free to Start</span>
        </div>
      </div>

      <!-- CTA Buttons -->
      <div class="landing-ctas">
        <button class="cta-btn cta-free" id="ctaFree" onclick="evpStartFree()">Start Free Investigation</button>
        <button class="cta-btn cta-pro" id="ctaPro" onclick="evpBuyPro()">
          Unlock Pro &mdash; $4.99
          <span class="cta-sub">All features. Lifetime access. One-time purchase.</span>
        </button>
        <button class="cta-btn cta-stripe" id="ctaStripe" onclick="evpBuyStripe()">
          Pay with Card &mdash; $4.99
          <span class="cta-sub">Secure checkout via Stripe. Instant access.</span>
        </button>
      </div>

      <!-- Feature Cards -->
      <div class="landing-features">
        <div class="feature-card">
          <div class="feature-icon">&#x1F3A4;</div>
          <div class="feature-name">EVP Capture</div>
          <div class="feature-desc">AI-powered A/B/C classification of electronic voice phenomena</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#x1F4E1;</div>
          <div class="feature-name">Spirit Box</div>
          <div class="feature-desc">FM sweep simulation with fragment detection &amp; noise modes</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#x1F441;</div>
          <div class="feature-name">Visual Scan</div>
          <div class="feature-desc">Night vision, thermal, edge detect, motion trails &amp; more</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#x26A1;</div>
          <div class="feature-name">EMF &amp; Sensors</div>
          <div class="feature-desc">Real magnetometer, accelerometer, gyroscope &amp; infrasound</div>
        </div>
      </div>

      <!-- Tier Comparison -->
      <div class="tier-compare">
        <div class="tier-card tier-free-card">
          <div class="tier-name">Free</div>
          <div class="tier-price">$0</div>
          <ul class="tier-list">
            <li class="yes">EVP Scan mode</li>
            <li class="yes">30-second sessions</li>
            <li class="yes">Basic audio analysis</li>
            <li class="yes">Gear shop</li>
            <li class="no">Spirit Box</li>
            <li class="no">Visual filters</li>
            <li class="no">Full Spectrum</li>
            <li class="no">Investigation tools</li>
            <li class="no">History, map &amp; export</li>
          </ul>
        </div>
        <div class="tier-card tier-pro-card">
          <div class="tier-badge">BEST VALUE</div>
          <div class="tier-name">Pro</div>
          <div class="tier-price">$4.99</div>
          <ul class="tier-list">
            <li class="yes">All 4 scan modes</li>
            <li class="yes">Unlimited sessions</li>
            <li class="yes">Full audio analysis</li>
            <li class="yes">Spirit Box + noise modes</li>
            <li class="yes">7 visual filters</li>
            <li class="yes">Full Spectrum mode</li>
            <li class="yes">Geiger, Dowsing, Words</li>
            <li class="yes">History, map &amp; export</li>
          </ul>
        </div>
      </div>

      <!-- Already Purchased — License Key Entry -->
      <div class="pro-code-section">
        <div class="pro-code-title">Already purchased Pro?</div>
        <div class="pro-code-label">Enter your Gumroad license key or Stripe purchase email:</div>
        <div class="pro-code-row">
          <input type="text" id="proCodeInput" placeholder="Enter license key" autocomplete="off">
          <button id="proCodeSubmit" onclick="evpActivateCode()">Activate</button>
        </div>
        <div class="pro-code-error" id="proCodeError"></div>
      </div>

      <!-- How To Get Pro -->
      <div class="how-it-works">
        <div class="hiw-title">How To Unlock Pro</div>
        <div class="hiw-steps">
          <div class="hiw-step">
            <div class="hiw-num">1</div>
            <div class="hiw-text">Tap &ldquo;Unlock Pro&rdquo; above &amp; complete purchase on Gumroad</div>
          </div>
          <div class="hiw-step">
            <div class="hiw-num">2</div>
            <div class="hiw-text">Check your email for the license key from Gumroad</div>
          </div>
          <div class="hiw-step">
            <div class="hiw-num">3</div>
            <div class="hiw-text">Enter the license key above to activate Pro features</div>
          </div>
        </div>
      </div>

      <!-- Add to Home Screen -->
      <div class="how-it-works">
        <div class="hiw-title">Add to Home Screen</div>
        <div class="hiw-steps">
          <div class="hiw-step">
            <div class="hiw-num">&#xF8FF;</div>
            <div class="hiw-text"><b>iPhone:</b> Tap the Share button (&#x2B06;) in Safari, then &ldquo;Add to Home Screen&rdquo;</div>
          </div>
          <div class="hiw-step">
            <div class="hiw-num">&#x25B6;</div>
            <div class="hiw-text"><b>Android:</b> Tap the menu (&#x22EE;) in Chrome, then &ldquo;Add to Home Screen&rdquo; or &ldquo;Install App&rdquo;</div>
          </div>
        </div>
      </div>

      <!-- Reviews -->
      <div class="reviews-section">
        <div class="review">
          <div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
          <div class="review-text">&ldquo;Best ghost hunting app I&rsquo;ve used. Got a Class A EVP hit at Waverly Hills.&rdquo;</div>
          <div class="review-author">&mdash; Mike R., Paranormal Investigator</div>
        </div>
        <div class="review">
          <div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
          <div class="review-text">&ldquo;Thermal vision and motion trails are incredible. Way better than apps that cost 10x more.&rdquo;</div>
          <div class="review-author">&mdash; Sarah K., Ghost Tour Guide</div>
        </div>
        <div class="review">
          <div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9734;</div>
          <div class="review-text">&ldquo;Word detection picked up &lsquo;hello&rsquo; and &lsquo;leave&rsquo; at the Stanley Hotel. Wild.&rdquo;</div>
          <div class="review-author">&mdash; Jason T., Ghost Hunter</div>
        </div>
      </div>

      <!-- AdSense — Landing Page Unit -->
      <div class="ad-slot" style="margin-bottom:20px;">
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2599493016668494" data-ad-slot="auto" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      </div>

      <div class="landing-footer">
        Real device sensors. Real audio analysis. Science-grounded methodology.
      </div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════════
       APP WRAPPER — Main application
       ═══════════════════════════════════════════════════════════════ -->
  <div class="app-wrapper" id="appWrapper">

    <!-- Upgrade Banner (free users) -->
    <div class="upgrade-banner" id="upgradeBanner">
      <span class="upgrade-text">Free tier &mdash; EVP Scan only, 30s max</span>
      <button class="upgrade-btn" id="btnUpgrade">Upgrade to Pro</button>
    </div>

    <!-- Upgrade Modal (shown when tapping Upgrade or locked features) -->
    <div class="upgrade-modal-overlay" id="upgradeModal">
      <div class="upgrade-modal">
        <button class="upgrade-modal-close" id="btnCloseUpgrade">&times;</button>
        <div class="upgrade-modal-title">Unlock Pro</div>
        <div class="upgrade-modal-price" id="upgradePrice">$4.99 &mdash; Lifetime Access</div>
        <div class="upgrade-modal-features">All 4 scan modes &bull; Unlimited sessions &bull; Spirit Box &bull; Visual filters &bull; Geiger &bull; Dowsing &bull; Word Detection &bull; History &bull; Map &bull; Export</div>
        <button class="upgrade-modal-buy" id="btnBuyPro">Purchase on Gumroad</button>
        <button class="upgrade-modal-stripe" id="btnBuyProStripe">Pay with Card (Stripe)</button>
        <div class="upgrade-modal-divider"><span>Already have a key?</span></div>
        <div class="upgrade-modal-code-row">
          <input type="text" id="appProCodeInput" placeholder="Enter license key" autocomplete="off">
          <button id="appProCodeSubmit">Activate</button>
        </div>
        <div class="upgrade-modal-error" id="appProCodeError"></div>
      </div>
    </div>

    <!-- Share / Add to Home Action Sheet -->
    <div class="upgrade-modal-overlay" id="shareModal">
      <div class="share-sheet">
        <button class="upgrade-modal-close" id="btnCloseShare">&times;</button>
        <div class="share-sheet-title">Share &amp; Install</div>
        <button class="share-sheet-btn" id="btnShareLink">
          <span class="share-sheet-icon">&#x1F517;</span>
          <span class="share-sheet-label">Share Link with Friends</span>
        </button>
        <button class="share-sheet-btn share-sheet-install" id="btnAddHome">
          <span class="share-sheet-icon">&#x2795;</span>
          <span class="share-sheet-label">Add to Home Screen</span>
        </button>
      </div>
    </div>

    <!-- iOS Install Instructions Modal -->
    <div class="upgrade-modal-overlay" id="iosInstallModal">
      <div class="upgrade-modal ios-install-modal">
        <button class="upgrade-modal-close" id="btnCloseIosInstall">&times;</button>
        <div class="upgrade-modal-title">Add to Home Screen</div>
        <div class="ios-steps">
          <div class="ios-step">
            <div class="ios-step-num">1</div>
            <div class="ios-step-text">Tap the <b>Safari Share button</b> at the very bottom of your screen (square with arrow &#x2B06;&#xFE0E;)</div>
          </div>
          <div class="ios-step">
            <div class="ios-step-num">2</div>
            <div class="ios-step-text"><b>Scroll down</b> in the share menu until you see <b>&ldquo;Add to Home Screen&rdquo;</b></div>
          </div>
          <div class="ios-step">
            <div class="ios-step-num">3</div>
            <div class="ios-step-text">Tap <b>&ldquo;Add&rdquo;</b> &mdash; the EVP-MINI icon will appear on your home screen</div>
          </div>
        </div>
        <div class="ios-note">This is a Safari feature &mdash; the app&rsquo;s Share button cannot do this. You must use Safari&rsquo;s own share button at the bottom of the browser.</div>
        <button class="upgrade-modal-buy" id="btnGotItIos">Got It</button>
      </div>
    </div>

    <!-- Header -->
    <div class="app-header">
      <h1>EVP-MINI</h1>
      <span class="mode-badge" id="modeBadge">EVP SCAN</span>
      <span class="pro-badge" id="proBadge" style="display:none">PRO</span>
      <span class="evp-count" id="evpCount">EVP: 0</span>
      <div class="header-controls">
        <button id="btnTorch" title="Flashlight">Torch</button>
        <button id="btnFlipCamera" title="Flip Camera">Flip</button>
        <button id="btnScreenshot" title="Screenshot">Shot</button>
        <button id="btnRecord" title="Record">REC</button>
        <button id="btnShareApp" title="Share App" class="share-btn-header">Share</button>
      </div>
    </div>

    <!-- Main Container -->
    <div class="main-container" id="mainContainer">

      <!-- Left Panel: Live View -->
      <div class="video-panel">

        <!-- Video + Overlay -->
        <div class="video-container" id="videoContainer">
          <video id="video" autoplay playsinline muted></video>
          <canvas id="overlay"></canvas>
          <canvas id="dowsingCanvas" class="dowsing-canvas"></canvas>
          <div class="nir-badge" id="nirBadge">NIR 700-950nm</div>
          <div class="scan-line" id="scanLine"></div>
          <div class="screen-flash" id="screenFlash"></div>
        </div>

        <!-- GPS Location -->
        <div class="gps-bar" id="gpsBar">
          <span class="gps-icon">&#x1F4CD;</span>
          <span class="gps-text" id="gpsText">Acquiring location...</span>
        </div>

        <!-- Mode Selector -->
        <div class="mode-selector">
          <button class="mode-btn active" data-mode="evp">EVP Scan</button>
          <button class="mode-btn" data-mode="spiritbox">Spirit Box<span class="lock-icon" data-lock="spiritbox"></span></button>
          <button class="mode-btn" data-mode="visual">Visual<span class="lock-icon" data-lock="visual"></span></button>
          <button class="mode-btn" data-mode="fullspectrum">Full Spectrum<span class="lock-icon" data-lock="fullspectrum"></span></button>
        </div>

        <!-- Visual Mode Selector -->
        <div class="visual-mode-selector" id="visualModeSelector" style="display:none;">
          <button class="visual-btn active" data-visual="normal">Normal</button>
          <button class="visual-btn" data-visual="night-vision">Night Vision</button>
          <button class="visual-btn" data-visual="edge-detect">Edges</button>
          <button class="visual-btn" data-visual="false-color">Thermal</button>
          <button class="visual-btn" data-visual="motion-detect">Motion</button>
          <button class="visual-btn" data-visual="motion-trails">Trails</button>
          <button class="visual-btn" data-visual="full-spectrum">Spectrum</button>
        </div>

        <!-- Tools Row -->
        <div class="tools-row" id="toolsRow">
          <button class="tool-btn" id="btnGeiger">Geiger<span class="lock-icon" data-lock="tools"></span></button>
          <button class="tool-btn" id="btnDowsing">Dowsing Rods<span class="lock-icon" data-lock="tools"></span></button>
          <button class="tool-btn" id="btnWords">Word Detect<span class="lock-icon" data-lock="tools"></span></button>
          <button class="tool-btn tool-btn-radar" id="btnRadar">Radar<span class="lock-icon" data-lock="tools"></span></button>
          <button class="tool-btn tool-btn-sfx" id="btnSfx" title="Toggle sound effects">SFX</button>
        </div>

        <!-- Entity Radar Panel -->
        <div class="radar-panel" id="radarPanel">
          <div class="radar-header">
            <span class="radar-title">Entity Radar</span>
            <span class="radar-count" id="radarEntityCount">0 detections</span>
          </div>
          <div class="radar-canvas-wrap">
            <canvas id="radarCanvas"></canvas>
          </div>
        </div>

        <!-- Paranormal Activity Index -->
        <div class="pai-bar" id="paiBar">
          <div class="pai-label">Paranormal Activity</div>
          <div class="pai-track">
            <div class="pai-fill" id="paiFill"></div>
          </div>
          <div class="pai-value" id="paiValue">0</div>
        </div>

        <!-- Duration Selector -->
        <div class="duration-selector">
          <button class="duration-btn active" data-duration="continuous">Continuous</button>
          <button class="duration-btn" data-duration="30">30s</button>
          <button class="duration-btn" data-duration="60">60s</button>
          <button class="duration-btn" data-duration="120">2 min</button>
        </div>

        <!-- Controls -->
        <div class="controls-row">
          <button class="btn-start" id="btnStart">Start Investigation</button>
          <button class="btn-stop" id="btnStop">Stop</button>
        </div>

        <!-- Status -->
        <div class="status-bar" id="statusBar">Ready — Select mode and start investigation</div>

        <!-- Timer -->
        <div class="timer-display" id="timerDisplay">0:00</div>

        <!-- Word Detection Display -->
        <div class="word-detect-panel" id="wordDetectPanel">
          <div class="panel-title">Word Detection (AI Phoneme Match)</div>
          <div class="word-display" id="wordDisplay">Listening...</div>
          <div class="word-log" id="wordLog"></div>
        </div>

        <!-- Spectrogram -->
        <div class="spectrogram-section" id="spectrogramSection">
          <div class="section-label">Audio Spectrogram</div>
          <canvas class="spectrogram-canvas" id="spectrogramCanvas"></canvas>
        </div>

        <!-- Waveform -->
        <div class="waveform-section" id="waveformSection">
          <div class="section-label">Audio Waveform</div>
          <canvas class="waveform-canvas" id="waveformCanvas"></canvas>
        </div>

        <!-- Audio Panel -->
        <div class="audio-panel" id="audioPanel">
          <div class="panel-title">Audio Analysis</div>
          <div class="meter-row">
            <span class="meter-label">Level</span>
            <div class="meter-bar"><div class="meter-fill" id="audioLevelFill"></div></div>
            <span class="meter-value" id="audioLevelValue">0%</span>
          </div>
          <div class="reading-grid">
            <div class="reading-item">
              <span class="rl">Peak Freq</span>
              <span class="rv" id="peakFreqValue">— Hz</span>
            </div>
            <div class="reading-item">
              <span class="rl">Noise Floor</span>
              <span class="rv" id="noiseFloorValue">— dB</span>
            </div>
            <div class="reading-item">
              <span class="rl">Spectral Centroid</span>
              <span class="rv" id="centroidValue">— Hz</span>
            </div>
            <div class="reading-item">
              <span class="rl">HNR</span>
              <span class="rv" id="hnrValue">— dB</span>
            </div>
            <div class="reading-item">
              <span class="rl">Anomaly</span>
              <span class="rv" id="anomalyValue">None</span>
            </div>
            <div class="reading-item">
              <span class="rl">Formant Match</span>
              <span class="rv" id="formantValue">—</span>
            </div>
          </div>
          <!-- Geiger Counter Status -->
          <div class="geiger-status" id="geigerStatus">
            <span class="geiger-icon">&#x2622;</span>
            <span class="geiger-label">Geiger:</span>
            <span class="geiger-rate" id="geigerRate">OFF</span>
          </div>
        </div>

        <!-- EVP Alert -->
        <div class="evp-alert" id="evpAlert">
          <div class="alert-class" id="evpAlertClass">EVP DETECTED</div>
          <div class="alert-detail" id="evpAlertDetail">Analyzing...</div>
        </div>

        <!-- EVP Detection Log -->
        <div class="evp-log" id="evpLog">
          <div class="panel-title">EVP Detection Log</div>
          <div class="evp-log-entries" id="evpLogEntries"></div>
        </div>

        <!-- Sensor Panel -->
        <div class="sensor-panel" id="sensorPanel">
          <div class="panel-title">Environmental Sensors</div>
          <div class="sensor-gauge">
            <span class="gauge-icon">&#x26A1;</span>
            <div class="gauge-info">
              <div class="gauge-label">EMF (Magnetometer)</div>
              <div class="gauge-value" id="emfValue">Initializing...</div>
            </div>
            <div class="gauge-bar"><div class="gauge-bar-fill" id="emfBar"></div></div>
          </div>
          <div class="sensor-gauge">
            <span class="gauge-icon">&#x301C;</span>
            <div class="gauge-info">
              <div class="gauge-label">Vibration (Accelerometer)</div>
              <div class="gauge-value" id="vibrationValue">Initializing...</div>
            </div>
            <div class="gauge-bar"><div class="gauge-bar-fill" id="vibrationBar"></div></div>
          </div>
          <div class="sensor-gauge">
            <span class="gauge-icon">&#x1F300;</span>
            <div class="gauge-info">
              <div class="gauge-label">Gyroscope</div>
              <div class="gauge-value" id="gyroValue">Checking...</div>
            </div>
          </div>
          <div class="sensor-gauge">
            <span class="gauge-icon">&#x2601;</span>
            <div class="gauge-info">
              <div class="gauge-label">Pressure (Barometer)</div>
              <div class="gauge-value unavailable" id="pressureValue">Checking...</div>
            </div>
          </div>
        </div>

        <!-- Spirit Box Panel -->
        <div class="spirit-box-panel" id="spiritBoxPanel">
          <div class="panel-title">Spirit Box</div>
          <div class="sweep-display">
            <div class="sweep-freq" id="sweepFreq">87.5</div>
            <div class="sweep-freq-label">MHz (simulated FM sweep)</div>
          </div>
          <div class="sweep-controls">
            <label>Speed:</label>
            <input type="range" id="sweepSpeed" min="30" max="350" value="150" step="10">
            <span class="speed-val" id="sweepSpeedVal">150ms</span>
          </div>
          <div class="spirit-mode-selector">
            <button class="spirit-mode-btn active" data-spiritmode="sweep">Sweep</button>
            <button class="spirit-mode-btn" data-spiritmode="white-noise">White</button>
            <button class="spirit-mode-btn" data-spiritmode="pink-noise">Pink</button>
          </div>
          <div class="reading-grid" style="margin-top:8px;">
            <div class="reading-item">
              <span class="rl">Fragments</span>
              <span class="rv" id="fragmentCount">0</span>
            </div>
            <div class="reading-item">
              <span class="rl">Mode</span>
              <span class="rv" id="sweepMode">Sweep</span>
            </div>
          </div>
        </div>

        <!-- Visual Info Panel -->
        <div class="visual-info-panel" id="visualInfoPanel">
          <div class="panel-title">Visual Analysis</div>
          <div class="reading-grid">
            <div class="reading-item">
              <span class="rl">Filter</span>
              <span class="rv" id="currentFilter">Normal</span>
            </div>
            <div class="reading-item">
              <span class="rl">Motion Level</span>
              <span class="rv" id="motionLevel">0%</span>
            </div>
          </div>
        </div>

        <!-- Live Indicators -->
        <div class="live-indicators" id="liveIndicators"></div>

        <!-- Playback Controls -->
        <div class="playback-section" id="playbackSection">
          <div class="panel-title">Audio Playback</div>
          <div class="playback-controls">
            <button id="btnPlayForward">Play Forward</button>
            <button id="btnPlayReverse">Play Reverse</button>
            <button id="btnStopPlayback">Stop</button>
            <button id="btnDownload">Download</button>
          </div>
        </div>

      </div>

      <!-- Right Panel: Evidence Report -->
      <div class="results-panel" id="resultsPanel">
        <div class="report-header">
          <h2>Investigation Report</h2>
          <div class="report-subtitle">EVP-MINI Evidence Analysis</div>
        </div>

        <div id="reportContent"></div>

        <button class="detail-toggle" id="detailToggle">Show Technical Detail</button>
        <div class="technical-detail" id="technicalDetail"></div>

        <div class="disclaimer">
          This app uses real device sensors and audio analysis but cannot verify paranormal phenomena.
          Audio anomalies may be caused by environmental noise, electronic interference, or auditory pareidolia
          (Nees &amp; Phillips, 2015). Results should be interpreted with scientific skepticism.
        </div>

        <div class="report-actions">
          <button id="btnShare">Share Evidence</button>
          <button id="btnNewScan">New Investigation</button>
          <button class="btn-export" id="btnExport">Export Evidence</button>
        </div>

        <!-- AdSense — In-App Report Unit -->
        <div class="ad-slot" style="margin-top:16px;">
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2599493016668494" data-ad-slot="auto" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>
      </div>

    </div>

    <!-- ── Map Panel (overlay) ──────────────────────────────────── -->
    <div class="overlay-panel" id="mapPanel">
      <div class="overlay-header">
        <h2>Investigation Map</h2>
        <button class="overlay-close" id="btnCloseMap">Close</button>
      </div>
      <div class="map-info" id="mapInfo">Loading investigations...</div>
      <div id="mapContainer" class="map-container"></div>
    </div>

    <!-- ── Gear Shop Panel (overlay) ────────────────────────────── -->
    <div class="overlay-panel" id="gearPanel">
      <div class="overlay-header">
        <h2>Investigation Gear</h2>
        <button class="overlay-close" id="btnCloseGear">Close</button>
      </div>
      <div class="gear-intro">Recommended equipment for professional paranormal investigations</div>
      <div class="gear-grid" id="gearGrid"></div>
      <div class="gear-disclaimer">
        Affiliate links &mdash; we may earn a small commission on purchases at no extra cost to you.
      </div>
    </div>

    <!-- ── History Panel (overlay) ──────────────────────────────── -->
    <div class="overlay-panel" id="historyPanel">
      <div class="overlay-header">
        <h2>Investigation History</h2>
        <button class="overlay-close" id="btnCloseHistory">Close</button>
      </div>
      <div class="history-storage" id="historyStorage"></div>
      <div class="history-list" id="historyList"></div>
    </div>

    <!-- ── Info / About Panel (overlay) ─────────────────────────── -->
    <div class="overlay-panel" id="infoPanel">
      <div class="overlay-header">
        <h2>EVP-MINI</h2>
        <button class="overlay-close" id="btnCloseInfo">Close</button>
      </div>

      <!-- Restore Purchase -->
      <div class="info-section">
        <div class="info-section-title">Restore Purchase</div>
        <div class="info-text">Already purchased Pro on another device or browser? Enter your Gumroad license key to restore access.</div>
        <div class="upgrade-modal-code-row">
          <input type="text" id="restoreCodeInput" placeholder="Enter license key" autocomplete="off">
          <button id="restoreCodeSubmit">Activate</button>
        </div>
        <div class="upgrade-modal-error" id="restoreCodeError"></div>
        <div class="info-hint">Your license key was emailed to you by Gumroad after purchase. Check your inbox for &ldquo;Your purchase of EVP-MINI Pro.&rdquo;</div>
      </div>

      <!-- About -->
      <div class="info-section">
        <div class="info-section-title">About</div>
        <div class="info-text">
          <b>EVP-MINI</b> is a professional paranormal investigation tool that transforms your phone into a multi-sensor detection system. It uses your device&rsquo;s real hardware &mdash; magnetometer, accelerometer, gyroscope, microphone, and camera &mdash; to capture and analyze environmental data in real-time.
        </div>
        <div class="info-text">
          The app applies science-grounded audio and visual analysis techniques to detect anomalies that may indicate paranormal activity. All readings come from real sensors &mdash; nothing is simulated or faked.
        </div>
        <div class="info-version" id="infoVersion">Version 2.0</div>
      </div>

      <!-- How to Use -->
      <div class="info-section">
        <div class="info-section-title">How to Use</div>

        <div class="info-subsection">
          <div class="info-subtitle">Getting Started</div>
          <div class="info-text">1. Grant camera and microphone access when prompted. These are required for audio and visual analysis.</div>
          <div class="info-text">2. Select a scan mode from the dropdown at the top of the investigation screen.</div>
          <div class="info-text">3. Choose a session duration (30s, 60s, 120s, or Continuous for Pro users).</div>
          <div class="info-text">4. Tap <b>Start</b> to begin your investigation. Hold your phone steady and remain quiet for best results.</div>
        </div>

        <div class="info-subsection">
          <div class="info-subtitle">Scan Modes</div>
          <div class="info-text"><b>EVP Scan</b> (Free) &mdash; Microphone-focused mode. Captures audio and runs real-time spectral analysis to detect voice-like patterns. Anomalies are classified as Class A (clear), B (moderate), or C (faint) based on spectral centroid, formant detection, and harmonic-to-noise ratio.</div>
          <div class="info-text"><b>Spirit Box</b> (Pro) &mdash; Simulates an FM radio sweep across frequencies. The rapid scanning creates audio fragments that may form words or phrases. Adjust sweep speed for different sensitivity levels.</div>
          <div class="info-text"><b>Visual Scan</b> (Pro) &mdash; Activates camera filters for visual anomaly detection. 7 modes available: Normal, Night Vision (green-tinted brightness amplification), Edge Detection (Sobel operator), False Color (thermal palette mapping), Motion Detect (frame differencing), Motion Trails (accumulated movement), and Full Spectrum (combined analysis).</div>
          <div class="info-text"><b>Full Spectrum</b> (Pro) &mdash; Every sensor and analysis engine running simultaneously at maximum sensitivity. Audio, visual, and environmental sensors all active. Use in locations with reported high activity.</div>
        </div>

        <div class="info-subsection">
          <div class="info-subtitle">Investigation Tools (Pro)</div>
          <div class="info-text"><b>Geiger Counter</b> &mdash; Multi-sensor anomaly detector. Aggregates data from EMF, audio, and motion sensors. Produces audio clicks that increase in frequency when anomalies are detected.</div>
          <div class="info-text"><b>Dowsing Rods</b> &mdash; Digital dowsing rods displayed on screen. They react to changes in electromagnetic fields and audio anomalies, crossing when significant readings occur.</div>
          <div class="info-text"><b>Word Detection</b> &mdash; AI phoneme matching engine that analyzes audio anomalies for speech-like patterns. When detected, candidate words are displayed with confidence scores.</div>
        </div>

        <div class="info-subsection">
          <div class="info-subtitle">Header Controls</div>
          <div class="info-text"><b>Torch</b> &mdash; Toggle your phone&rsquo;s flashlight for dark locations.</div>
          <div class="info-text"><b>Flip</b> &mdash; Switch between front and rear camera. The front camera may detect near-infrared (700-950nm).</div>
          <div class="info-text"><b>Shot</b> &mdash; Take a screenshot of the current camera view with any active visual filters applied.</div>
          <div class="info-text"><b>REC</b> &mdash; Record audio during your investigation. Recordings can be played back in reverse (a traditional EVP analysis technique).</div>
          <div class="info-text"><b>Share</b> &mdash; Share the app link via your phone&rsquo;s native share sheet.</div>
        </div>

        <div class="info-subsection">
          <div class="info-subtitle">Sensor Readings</div>
          <div class="info-text"><b>EMF</b> &mdash; Electromagnetic field strength in microtesla (&micro;T) via your phone&rsquo;s magnetometer. Deviations &gt;5&micro;T from baseline are flagged.</div>
          <div class="info-text"><b>Infrasound</b> &mdash; Detects low-frequency vibrations via accelerometer. Flags frequencies near 18.98Hz (Tandy&rsquo;s &ldquo;fear frequency&rdquo; linked to unease and visual disturbances).</div>
          <div class="info-text"><b>Pressure</b> &mdash; Barometric pressure via device barometer (when available). Sudden changes may correlate with reported activity.</div>
        </div>

        <div class="info-subsection">
          <div class="info-subtitle">After Your Investigation</div>
          <div class="info-text">When a timed scan completes, an <b>Evidence Report</b> is generated summarizing all findings: audio events, visual anomalies, sensor data, and EVP classifications.</div>
          <div class="info-text">Pro users can <b>Export</b> the full report, view past sessions in <b>History</b>, and plot investigation locations on the <b>Map</b>.</div>
        </div>

        <div class="info-subsection">
          <div class="info-subtitle">Tips for Best Results</div>
          <div class="info-text">&bull; Investigate in quiet environments for clearer audio capture.</div>
          <div class="info-text">&bull; Keep your phone steady &mdash; excess movement affects sensor readings.</div>
          <div class="info-text">&bull; Use Night Vision or Full Spectrum modes in dark locations.</div>
          <div class="info-text">&bull; Run multiple sessions at the same location to establish baseline readings.</div>
          <div class="info-text">&bull; Review recordings in reverse &mdash; EVP phenomena are often reported as clearer in reverse playback.</div>
        </div>
      </div>

      <!-- Device & Account Info -->
      <div class="info-section">
        <div class="info-section-title">Your Account</div>
        <div class="info-text">Your Pro status is stored locally on this device and browser. <b>No account or login is required.</b></div>
        <div class="info-text">If you switch to a different device, browser, or clear your browser data, simply enter your Gumroad license key again using &ldquo;Restore Purchase&rdquo; above. Your license key works on unlimited devices.</div>
        <div class="info-text" id="infoProStatus"></div>
      </div>

      <!-- Add to Home Screen -->
      <div class="info-section">
        <div class="info-section-title">Add to Home Screen</div>
        <div class="info-text"><b>iPhone (Safari):</b> Tap the Share button (&#x2B06;&#xFE0E;) at the bottom of Safari, scroll down, and tap &ldquo;Add to Home Screen.&rdquo; The EVP-MINI icon will appear on your home screen like a native app.</div>
        <div class="info-text"><b>Android (Chrome):</b> Tap the three-dot menu (&#x22EE;), then tap &ldquo;Add to Home Screen&rdquo; or &ldquo;Install App.&rdquo;</div>
      </div>

      <!-- Legal -->
      <div class="info-section">
        <div class="info-section-title">Legal &amp; Disclaimer</div>
        <div class="info-text"><b>Disclaimer:</b> EVP-MINI is an entertainment and research tool. This application uses real device sensors and real-time signal analysis but <b>cannot verify, confirm, or disprove the existence of paranormal phenomena</b>. Audio anomalies detected by the app may be caused by environmental noise, electronic interference, radio frequency signals, or auditory pareidolia &mdash; the human tendency to perceive meaningful patterns in random stimuli (Nees &amp; Phillips, 2015).</div>
        <div class="info-text"><b>No Guarantee:</b> Results and readings are provided &ldquo;as is&rdquo; for informational and entertainment purposes only. The developer makes no claims regarding the accuracy, reliability, or supernatural origin of any readings, detections, or classifications produced by this application.</div>
        <div class="info-text"><b>Sensor Accuracy:</b> Sensor readings depend on your device&rsquo;s hardware capabilities and calibration. Not all devices support all sensors. EMF, barometric, and motion readings may vary between devices and are not calibrated to laboratory-grade instruments.</div>
        <div class="info-text"><b>Privacy:</b> EVP-MINI processes all audio, video, and sensor data locally on your device. <b>No data is transmitted to external servers</b> except: (1) license key verification via Gumroad&rsquo;s API, and (2) reverse geocoding via OpenStreetMap Nominatim for location tagging. No personal data is collected, stored, or shared. Camera and microphone access is used exclusively for real-time analysis and is never recorded without your explicit action.</div>
        <div class="info-text"><b>Purchases:</b> Pro upgrades are processed by Gumroad, Inc. All purchases are one-time, non-recurring payments. Refund requests should be directed to Gumroad. License keys are valid for unlimited devices and do not expire.</div>
        <div class="info-text"><b>Safety:</b> Always investigate responsibly. Obtain permission before entering private property. Be aware of your surroundings. Do not use this app while driving or operating machinery. The developer is not responsible for any actions taken based on readings from this application.</div>
        <div class="info-text"><b>Scientific References:</b><br>
          &bull; Tandy, V. (1998). &ldquo;The Ghost in the Machine.&rdquo; <i>Journal of the Society for Psychical Research</i>, 62, 360&ndash;364.<br>
          &bull; Nees, M. A. &amp; Phillips, C. (2015). &ldquo;Auditory pareidolia.&rdquo; <i>Perception</i>, 44(5), 569&ndash;575.<br>
          &bull; Baruss, I. (2001). &ldquo;Failure to replicate electronic voice phenomena.&rdquo; <i>Journal of Scientific Exploration</i>, 15(3), 355&ndash;367.<br>
          &bull; Raudive, K. (1971). <i>Breakthrough: An Amazing Experiment in Electronic Communication with the Dead.</i>
        </div>
        <div class="info-text info-copyright">&copy; 2024 EVP-MINI. All rights reserved.</div>
      </div>
    </div>

    <!-- ── Bottom Navigation ────────────────────────────────────── -->
    <div class="bottom-nav" id="bottomNav">
      <button class="nav-btn active" data-nav="investigate">
        <span class="nav-icon">&#x1F50D;</span>
        <span class="nav-label">Investigate</span>
      </button>
      <button class="nav-btn" data-nav="map">
        <span class="nav-icon">&#x1F5FA;</span>
        <span class="nav-label">Map</span>
      </button>
      <button class="nav-btn" data-nav="gear">
        <span class="nav-icon">&#x1F6D2;</span>
        <span class="nav-label">Gear</span>
      </button>
      <button class="nav-btn" data-nav="history">
        <span class="nav-icon">&#x1F4CB;</span>
        <span class="nav-label">History</span>
      </button>
      <button class="nav-btn" data-nav="info">
        <span class="nav-icon">&#x2139;&#xFE0F;</span>
        <span class="nav-label">Info</span>
      </button>
    </div>

    <!-- ── Install Banner ───────────────────────────────────────── -->
    <div class="install-banner" id="installBanner">
      <span class="install-text">Add EVP-MINI to your home screen</span>
      <button class="install-btn" id="btnInstall">Install</button>
      <button class="install-dismiss" id="btnDismissInstall">&#x2715;</button>
    </div>

  </div>

  <!-- ═══════════════════════════════════════════════════════════════
       SCRIPTS
       ═══════════════════════════════════════════════════════════════ -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://gumroad.com/js/gumroad.js" async></script>
  <script src="js/pro-gate.js?v=9"></script>
  <script src="js/evp-audio-engine.js?v=9"></script>
  <script src="js/visual-anomaly-engine.js?v=9"></script>
  <script src="js/emf-sensor-engine.js?v=9"></script>
  <script src="js/spirit-box-engine.js?v=9"></script>
  <script src="js/evp-classifier.js?v=9"></script>
  <script src="js/session-recorder.js?v=9"></script>
  <script src="js/evidence-report.js?v=9"></script>
  <script src="js/session-vault.js?v=9"></script>
  <script src="js/geiger-counter.js?v=9"></script>
  <script src="js/dowsing-rods.js?v=9"></script>
  <script src="js/word-detector.js?v=9"></script>
  <script src="js/investigation-map.js?v=9"></script>
  <script src="js/entity-radar.js?v=9"></script>
  <script src="js/detection-sfx.js?v=9"></script>
  <script src="js/app.js?v=9"></script>

  <!-- ProGate instance + re-apply restrictions now that instance exists -->
  <script>
    try {
      window.proGateInstance = new ProGate();
      if (window.proGateInstance.isPro) {
        evpEnterApp();
      }
      // Re-apply restrictions now that proGateInstance exists
      // (init() may have already run before this script loaded)
      if (typeof applyProRestrictions === 'function') applyProRestrictions();
    } catch (e) { console.warn('ProGate init:', e); }
  </script>

</body>
</html>
