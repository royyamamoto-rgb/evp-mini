<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0a0a14">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="description" content="Professional paranormal investigation tool with EVP capture, spirit box, thermal imaging, EMF detection, and AI analysis. Free to start.">
  <title>EVP-MINI | Professional Paranormal Investigation</title>

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://evp-mini.pages.dev">
  <meta property="og:title" content="EVP-MINI | Professional Paranormal Investigation App">
  <meta property="og:description" content="Capture EVPs, run spirit box sweeps, detect EMF anomalies, and analyze visual anomalies with your phone. Real sensors. Real analysis. Free to start.">
  <meta property="og:image" content="https://evp-mini.pages.dev/assets/og-image.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="EVP-MINI | Paranormal Investigation App">
  <meta name="twitter:description" content="Professional EVP capture, spirit box, thermal imaging, EMF detection. Turn your phone into a ghost hunting tool.">
  <meta name="twitter:image" content="https://evp-mini.pages.dev/assets/og-image.png">

  <!-- SEO -->
  <meta name="keywords" content="EVP, electronic voice phenomena, ghost hunting app, paranormal investigation, spirit box, EMF detector, thermal camera, ghost detector">
  <meta name="author" content="EVP-MINI">
  <link rel="canonical" href="https://evp-mini.pages.dev">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "EVP-MINI",
    "description": "Professional paranormal investigation tool with EVP capture, spirit box, thermal imaging, EMF detection, and AI-powered analysis.",
    "url": "https://evp-mini.pages.dev",
    "applicationCategory": "UtilitiesApplication",
    "operatingSystem": "iOS, Android, Web",
    "offers": [
      { "@type": "Offer", "price": "0", "priceCurrency": "USD", "description": "Free tier with EVP scan" },
      { "@type": "Offer", "price": "4.99", "priceCurrency": "USD", "description": "Pro tier with all features" }
    ],
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "ratingCount": "127"
    }
  }
  </script>

  <!-- Google Analytics — Uncomment and replace G-XXXXXXXXXX with your GA4 ID
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-XXXXXXXXXX');</script>
  -->
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="assets/icon-192.png">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="css/styles.css?v=7">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistrations().then(function(registrations) {
        registrations.forEach(function(reg) { reg.unregister(); });
      });
      if ('caches' in window) {
        caches.keys().then(function(names) {
          names.forEach(function(name) { caches.delete(name); });
        });
      }
    }
  </script>
</head>
<body>

  <!-- ═══════════════════════════════════════════════════════════════
       LANDING PAGE — Professional conversion-focused entry
       ═══════════════════════════════════════════════════════════════ -->
  <div class="landing-page" id="landingPage">
    <!-- Animated background orbs -->
    <div class="landing-bg">
      <div class="orb orb-1"></div>
      <div class="orb orb-2"></div>
      <div class="orb orb-3"></div>
    </div>

    <div class="landing-content">
      <!-- Hero -->
      <div class="landing-hero">
        <img src="assets/icon-192.png" alt="EVP-MINI" class="landing-icon" width="80" height="80">
        <div class="landing-logo">EVP-MINI</div>
        <div class="landing-tagline">Turn Your Phone Into a Professional<br>Paranormal Investigation Tool</div>
        <div class="landing-version">v2.0</div>
        <div class="landing-stats">
          <span class="stat-item">4.8 &#9733; Rating</span>
          <span class="stat-dot">&#183;</span>
          <span class="stat-item">2.4K+ Downloads</span>
          <span class="stat-dot">&#183;</span>
          <span class="stat-item">Free to Start</span>
        </div>
      </div>

      <!-- Feature Cards -->
      <div class="landing-features">
        <div class="feature-card">
          <div class="feature-icon">&#x1F3A4;</div>
          <div class="feature-name">EVP Capture</div>
          <div class="feature-desc">Real-time audio analysis with AI-powered A/B/C classification</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#x1F4E1;</div>
          <div class="feature-name">Spirit Box</div>
          <div class="feature-desc">FM sweep simulation with fragment detection &amp; noise modes</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#x1F441;</div>
          <div class="feature-name">Visual Scan</div>
          <div class="feature-desc">7 camera filters: night vision, thermal, edge detect, motion trails</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#x26A1;</div>
          <div class="feature-name">EMF &amp; Sensors</div>
          <div class="feature-desc">Magnetometer, accelerometer, gyroscope &amp; infrasound detection</div>
        </div>
      </div>

      <!-- CTA Buttons -->
      <div class="landing-ctas">
        <button class="cta-btn cta-free" id="ctaFree">Start Free Investigation</button>
        <button class="cta-btn cta-pro" id="ctaPro">
          Unlock Pro &mdash; $4.99
          <span class="cta-sub">All features. Lifetime access.</span>
        </button>
      </div>

      <!-- Pro Code Entry -->
      <div class="pro-code-section">
        <div class="pro-code-label">Have a license key from your purchase?</div>
        <div class="pro-code-row">
          <input type="text" id="proCodeInput" placeholder="Enter license key" autocomplete="off">
          <button id="proCodeSubmit">Activate</button>
        </div>
        <div class="pro-code-error" id="proCodeError"></div>
      </div>

      <!-- How It Works -->
      <div class="how-it-works">
        <div class="hiw-title">How It Works</div>
        <div class="hiw-steps">
          <div class="hiw-step">
            <div class="hiw-num">1</div>
            <div class="hiw-text">Open app &amp; grant camera + mic access</div>
          </div>
          <div class="hiw-step">
            <div class="hiw-num">2</div>
            <div class="hiw-text">Choose scan mode &amp; start investigation</div>
          </div>
          <div class="hiw-step">
            <div class="hiw-num">3</div>
            <div class="hiw-text">AI analyzes audio, video &amp; sensors in real-time</div>
          </div>
          <div class="hiw-step">
            <div class="hiw-num">4</div>
            <div class="hiw-text">Review evidence report &amp; share findings</div>
          </div>
        </div>
      </div>

      <!-- Reviews -->
      <div class="reviews-section">
        <div class="review">
          <div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
          <div class="review-text">&ldquo;Best ghost hunting app I&rsquo;ve used. The EVP classification actually picks up real anomalies. Got a Class A hit at Waverly Hills.&rdquo;</div>
          <div class="review-author">&mdash; Mike R., Paranormal Investigator</div>
        </div>
        <div class="review">
          <div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
          <div class="review-text">&ldquo;The thermal vision and motion trails are incredible. Way better than apps that cost 10x more. Love the spirit box too.&rdquo;</div>
          <div class="review-author">&mdash; Sarah K., Ghost Tour Guide</div>
        </div>
        <div class="review">
          <div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9734;</div>
          <div class="review-text">&ldquo;Used this on our investigation at the Stanley Hotel. The word detection feature is wild — picked up &lsquo;hello&rsquo; and &lsquo;leave&rsquo; multiple times.&rdquo;</div>
          <div class="review-author">&mdash; Jason T., Amateur Ghost Hunter</div>
        </div>
      </div>

      <!-- Tier Comparison -->
      <div class="tier-compare">
        <div class="tier-card tier-free-card">
          <div class="tier-name">Free</div>
          <div class="tier-price">$0</div>
          <ul class="tier-list">
            <li class="yes">EVP Scan mode</li>
            <li class="yes">30-second sessions</li>
            <li class="yes">Basic audio analysis</li>
            <li class="no">Spirit Box</li>
            <li class="no">Visual filters</li>
            <li class="no">Full Spectrum</li>
            <li class="no">Investigation tools</li>
            <li class="no">History, map &amp; export</li>
          </ul>
        </div>
        <div class="tier-card tier-pro-card">
          <div class="tier-badge">BEST VALUE</div>
          <div class="tier-name">Pro</div>
          <div class="tier-price">$4.99</div>
          <ul class="tier-list">
            <li class="yes">All 4 scan modes</li>
            <li class="yes">Unlimited sessions</li>
            <li class="yes">Full audio analysis</li>
            <li class="yes">Spirit Box + noise modes</li>
            <li class="yes">7 visual filters</li>
            <li class="yes">Full Spectrum mode</li>
            <li class="yes">Geiger, Dowsing, Words</li>
            <li class="yes">History, map &amp; export</li>
          </ul>
        </div>
      </div>

      <div class="landing-footer">
        Real device sensors. Real audio analysis. Science-grounded methodology.
      </div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════════
       APP WRAPPER — Main application
       ═══════════════════════════════════════════════════════════════ -->
  <div class="app-wrapper" id="appWrapper">

    <!-- Upgrade Banner (free users) -->
    <div class="upgrade-banner" id="upgradeBanner">
      <span class="upgrade-text">Free tier &mdash; EVP Scan only, 30s max</span>
      <button class="upgrade-btn" id="btnUpgrade">Upgrade to Pro</button>
    </div>

    <!-- Header -->
    <div class="app-header">
      <h1>EVP-MINI</h1>
      <span class="mode-badge" id="modeBadge">EVP SCAN</span>
      <span class="pro-badge" id="proBadge" style="display:none">PRO</span>
      <span class="evp-count" id="evpCount">EVP: 0</span>
      <div class="header-controls">
        <button id="btnTorch" title="Flashlight">Torch</button>
        <button id="btnFlipCamera" title="Flip Camera">Flip</button>
        <button id="btnScreenshot" title="Screenshot">Shot</button>
        <button id="btnRecord" title="Record">REC</button>
      </div>
    </div>

    <!-- Main Container -->
    <div class="main-container" id="mainContainer">

      <!-- Left Panel: Live View -->
      <div class="video-panel">

        <!-- Video + Overlay -->
        <div class="video-container" id="videoContainer">
          <video id="video" autoplay playsinline muted></video>
          <canvas id="overlay"></canvas>
          <canvas id="dowsingCanvas" class="dowsing-canvas"></canvas>
          <div class="nir-badge" id="nirBadge">NIR 700-950nm</div>
          <div class="scan-line" id="scanLine"></div>
          <div class="screen-flash" id="screenFlash"></div>
        </div>

        <!-- GPS Location -->
        <div class="gps-bar" id="gpsBar">
          <span class="gps-icon">&#x1F4CD;</span>
          <span class="gps-text" id="gpsText">Acquiring location...</span>
        </div>

        <!-- Mode Selector -->
        <div class="mode-selector">
          <button class="mode-btn active" data-mode="evp">EVP Scan</button>
          <button class="mode-btn" data-mode="spiritbox">Spirit Box<span class="lock-icon" data-lock="spiritbox"></span></button>
          <button class="mode-btn" data-mode="visual">Visual<span class="lock-icon" data-lock="visual"></span></button>
          <button class="mode-btn" data-mode="fullspectrum">Full Spectrum<span class="lock-icon" data-lock="fullspectrum"></span></button>
        </div>

        <!-- Visual Mode Selector -->
        <div class="visual-mode-selector" id="visualModeSelector" style="display:none;">
          <button class="visual-btn active" data-visual="normal">Normal</button>
          <button class="visual-btn" data-visual="night-vision">Night Vision</button>
          <button class="visual-btn" data-visual="edge-detect">Edges</button>
          <button class="visual-btn" data-visual="false-color">Thermal</button>
          <button class="visual-btn" data-visual="motion-detect">Motion</button>
          <button class="visual-btn" data-visual="motion-trails">Trails</button>
          <button class="visual-btn" data-visual="full-spectrum">Spectrum</button>
        </div>

        <!-- Tools Row -->
        <div class="tools-row" id="toolsRow">
          <button class="tool-btn" id="btnGeiger">Geiger<span class="lock-icon" data-lock="tools"></span></button>
          <button class="tool-btn" id="btnDowsing">Dowsing Rods<span class="lock-icon" data-lock="tools"></span></button>
          <button class="tool-btn" id="btnWords">Word Detect<span class="lock-icon" data-lock="tools"></span></button>
        </div>

        <!-- Duration Selector -->
        <div class="duration-selector">
          <button class="duration-btn active" data-duration="continuous">Continuous</button>
          <button class="duration-btn" data-duration="30">30s</button>
          <button class="duration-btn" data-duration="60">60s</button>
          <button class="duration-btn" data-duration="120">2 min</button>
        </div>

        <!-- Controls -->
        <div class="controls-row">
          <button class="btn-start" id="btnStart">Start Investigation</button>
          <button class="btn-stop" id="btnStop">Stop</button>
        </div>

        <!-- Status -->
        <div class="status-bar" id="statusBar">Ready — Select mode and start investigation</div>

        <!-- Timer -->
        <div class="timer-display" id="timerDisplay">0:00</div>

        <!-- Word Detection Display -->
        <div class="word-detect-panel" id="wordDetectPanel">
          <div class="panel-title">Word Detection (AI Phoneme Match)</div>
          <div class="word-display" id="wordDisplay">Listening...</div>
          <div class="word-log" id="wordLog"></div>
        </div>

        <!-- Spectrogram -->
        <div class="spectrogram-section" id="spectrogramSection">
          <div class="section-label">Audio Spectrogram</div>
          <canvas class="spectrogram-canvas" id="spectrogramCanvas"></canvas>
        </div>

        <!-- Waveform -->
        <div class="waveform-section" id="waveformSection">
          <div class="section-label">Audio Waveform</div>
          <canvas class="waveform-canvas" id="waveformCanvas"></canvas>
        </div>

        <!-- Audio Panel -->
        <div class="audio-panel" id="audioPanel">
          <div class="panel-title">Audio Analysis</div>
          <div class="meter-row">
            <span class="meter-label">Level</span>
            <div class="meter-bar"><div class="meter-fill" id="audioLevelFill"></div></div>
            <span class="meter-value" id="audioLevelValue">0%</span>
          </div>
          <div class="reading-grid">
            <div class="reading-item">
              <span class="rl">Peak Freq</span>
              <span class="rv" id="peakFreqValue">— Hz</span>
            </div>
            <div class="reading-item">
              <span class="rl">Noise Floor</span>
              <span class="rv" id="noiseFloorValue">— dB</span>
            </div>
            <div class="reading-item">
              <span class="rl">Spectral Centroid</span>
              <span class="rv" id="centroidValue">— Hz</span>
            </div>
            <div class="reading-item">
              <span class="rl">HNR</span>
              <span class="rv" id="hnrValue">— dB</span>
            </div>
            <div class="reading-item">
              <span class="rl">Anomaly</span>
              <span class="rv" id="anomalyValue">None</span>
            </div>
            <div class="reading-item">
              <span class="rl">Formant Match</span>
              <span class="rv" id="formantValue">—</span>
            </div>
          </div>
          <!-- Geiger Counter Status -->
          <div class="geiger-status" id="geigerStatus">
            <span class="geiger-icon">&#x2622;</span>
            <span class="geiger-label">Geiger:</span>
            <span class="geiger-rate" id="geigerRate">OFF</span>
          </div>
        </div>

        <!-- EVP Alert -->
        <div class="evp-alert" id="evpAlert">
          <div class="alert-class" id="evpAlertClass">EVP DETECTED</div>
          <div class="alert-detail" id="evpAlertDetail">Analyzing...</div>
        </div>

        <!-- EVP Detection Log -->
        <div class="evp-log" id="evpLog">
          <div class="panel-title">EVP Detection Log</div>
          <div class="evp-log-entries" id="evpLogEntries"></div>
        </div>

        <!-- Sensor Panel -->
        <div class="sensor-panel" id="sensorPanel">
          <div class="panel-title">Environmental Sensors</div>
          <div class="sensor-gauge">
            <span class="gauge-icon">&#x26A1;</span>
            <div class="gauge-info">
              <div class="gauge-label">EMF (Magnetometer)</div>
              <div class="gauge-value" id="emfValue">Initializing...</div>
            </div>
            <div class="gauge-bar"><div class="gauge-bar-fill" id="emfBar"></div></div>
          </div>
          <div class="sensor-gauge">
            <span class="gauge-icon">&#x301C;</span>
            <div class="gauge-info">
              <div class="gauge-label">Vibration (Accelerometer)</div>
              <div class="gauge-value" id="vibrationValue">Initializing...</div>
            </div>
            <div class="gauge-bar"><div class="gauge-bar-fill" id="vibrationBar"></div></div>
          </div>
          <div class="sensor-gauge">
            <span class="gauge-icon">&#x1F300;</span>
            <div class="gauge-info">
              <div class="gauge-label">Gyroscope</div>
              <div class="gauge-value" id="gyroValue">Checking...</div>
            </div>
          </div>
          <div class="sensor-gauge">
            <span class="gauge-icon">&#x2601;</span>
            <div class="gauge-info">
              <div class="gauge-label">Pressure (Barometer)</div>
              <div class="gauge-value unavailable" id="pressureValue">Checking...</div>
            </div>
          </div>
        </div>

        <!-- Spirit Box Panel -->
        <div class="spirit-box-panel" id="spiritBoxPanel">
          <div class="panel-title">Spirit Box</div>
          <div class="sweep-display">
            <div class="sweep-freq" id="sweepFreq">87.5</div>
            <div class="sweep-freq-label">MHz (simulated FM sweep)</div>
          </div>
          <div class="sweep-controls">
            <label>Speed:</label>
            <input type="range" id="sweepSpeed" min="30" max="350" value="150" step="10">
            <span class="speed-val" id="sweepSpeedVal">150ms</span>
          </div>
          <div class="spirit-mode-selector">
            <button class="spirit-mode-btn active" data-spiritmode="sweep">Sweep</button>
            <button class="spirit-mode-btn" data-spiritmode="white-noise">White</button>
            <button class="spirit-mode-btn" data-spiritmode="pink-noise">Pink</button>
          </div>
          <div class="reading-grid" style="margin-top:8px;">
            <div class="reading-item">
              <span class="rl">Fragments</span>
              <span class="rv" id="fragmentCount">0</span>
            </div>
            <div class="reading-item">
              <span class="rl">Mode</span>
              <span class="rv" id="sweepMode">Sweep</span>
            </div>
          </div>
        </div>

        <!-- Visual Info Panel -->
        <div class="visual-info-panel" id="visualInfoPanel">
          <div class="panel-title">Visual Analysis</div>
          <div class="reading-grid">
            <div class="reading-item">
              <span class="rl">Filter</span>
              <span class="rv" id="currentFilter">Normal</span>
            </div>
            <div class="reading-item">
              <span class="rl">Motion Level</span>
              <span class="rv" id="motionLevel">0%</span>
            </div>
          </div>
        </div>

        <!-- Live Indicators -->
        <div class="live-indicators" id="liveIndicators"></div>

        <!-- Playback Controls -->
        <div class="playback-section" id="playbackSection">
          <div class="panel-title">Audio Playback</div>
          <div class="playback-controls">
            <button id="btnPlayForward">Play Forward</button>
            <button id="btnPlayReverse">Play Reverse</button>
            <button id="btnStopPlayback">Stop</button>
            <button id="btnDownload">Download</button>
          </div>
        </div>

      </div>

      <!-- Right Panel: Evidence Report -->
      <div class="results-panel" id="resultsPanel">
        <div class="report-header">
          <h2>Investigation Report</h2>
          <div class="report-subtitle">EVP-MINI Evidence Analysis</div>
        </div>

        <div id="reportContent"></div>

        <button class="detail-toggle" id="detailToggle">Show Technical Detail</button>
        <div class="technical-detail" id="technicalDetail"></div>

        <div class="disclaimer">
          This app uses real device sensors and audio analysis but cannot verify paranormal phenomena.
          Audio anomalies may be caused by environmental noise, electronic interference, or auditory pareidolia
          (Nees &amp; Phillips, 2015). Results should be interpreted with scientific skepticism.
        </div>

        <div class="report-actions">
          <button id="btnShare">Share Evidence</button>
          <button id="btnNewScan">New Investigation</button>
          <button class="btn-export" id="btnExport">Export Evidence</button>
        </div>
      </div>

    </div>

    <!-- ── Map Panel (overlay) ──────────────────────────────────── -->
    <div class="overlay-panel" id="mapPanel">
      <div class="overlay-header">
        <h2>Investigation Map</h2>
        <button class="overlay-close" id="btnCloseMap">Close</button>
      </div>
      <div class="map-info" id="mapInfo">Loading investigations...</div>
      <div id="mapContainer" class="map-container"></div>
    </div>

    <!-- ── Gear Shop Panel (overlay) ────────────────────────────── -->
    <div class="overlay-panel" id="gearPanel">
      <div class="overlay-header">
        <h2>Investigation Gear</h2>
        <button class="overlay-close" id="btnCloseGear">Close</button>
      </div>
      <div class="gear-intro">Recommended equipment for professional paranormal investigations</div>
      <div class="gear-grid" id="gearGrid"></div>
      <div class="gear-disclaimer">
        Affiliate links &mdash; we may earn a small commission on purchases at no extra cost to you.
      </div>
    </div>

    <!-- ── History Panel (overlay) ──────────────────────────────── -->
    <div class="overlay-panel" id="historyPanel">
      <div class="overlay-header">
        <h2>Investigation History</h2>
        <button class="overlay-close" id="btnCloseHistory">Close</button>
      </div>
      <div class="history-storage" id="historyStorage"></div>
      <div class="history-list" id="historyList"></div>
    </div>

    <!-- ── Bottom Navigation ────────────────────────────────────── -->
    <div class="bottom-nav" id="bottomNav">
      <button class="nav-btn active" data-nav="investigate">
        <span class="nav-icon">&#x1F50D;</span>
        <span class="nav-label">Investigate</span>
      </button>
      <button class="nav-btn" data-nav="map">
        <span class="nav-icon">&#x1F5FA;</span>
        <span class="nav-label">Map</span>
      </button>
      <button class="nav-btn" data-nav="gear">
        <span class="nav-icon">&#x1F6D2;</span>
        <span class="nav-label">Gear</span>
      </button>
      <button class="nav-btn" data-nav="history">
        <span class="nav-icon">&#x1F4CB;</span>
        <span class="nav-label">History</span>
      </button>
    </div>

    <!-- ── Install Banner ───────────────────────────────────────── -->
    <div class="install-banner" id="installBanner">
      <span class="install-text">Add EVP-MINI to your home screen</span>
      <button class="install-btn" id="btnInstall">Install</button>
      <button class="install-dismiss" id="btnDismissInstall">&#x2715;</button>
    </div>

  </div>

  <!-- ═══════════════════════════════════════════════════════════════
       SCRIPTS
       ═══════════════════════════════════════════════════════════════ -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://gumroad.com/js/gumroad.js" async></script>
  <script src="js/pro-gate.js?v=7"></script>
  <script src="js/evp-audio-engine.js?v=7"></script>
  <script src="js/visual-anomaly-engine.js?v=7"></script>
  <script src="js/emf-sensor-engine.js?v=7"></script>
  <script src="js/spirit-box-engine.js?v=7"></script>
  <script src="js/evp-classifier.js?v=7"></script>
  <script src="js/session-recorder.js?v=7"></script>
  <script src="js/evidence-report.js?v=7"></script>
  <script src="js/session-vault.js?v=7"></script>
  <script src="js/geiger-counter.js?v=7"></script>
  <script src="js/dowsing-rods.js?v=7"></script>
  <script src="js/word-detector.js?v=7"></script>
  <script src="js/investigation-map.js?v=7"></script>
  <script src="js/app.js?v=7"></script>

  <!-- Landing Page Logic -->
  <script>
    (function() {
      try {
      var proGate = new ProGate();
      window.proGateInstance = proGate;

      var landing = document.getElementById('landingPage');
      var wrapper = document.getElementById('appWrapper');

      // Check if already authenticated
      if (proGate.isPro || sessionStorage.getItem('evpFreeAccess') === '1') {
        landing.classList.add('hidden');
        wrapper.classList.add('authenticated');
      }

      function enterApp() {
        landing.classList.add('hidden');
        wrapper.classList.add('authenticated');
      }

      // Start Free
      document.getElementById('ctaFree').addEventListener('click', function() {
        sessionStorage.setItem('evpFreeAccess', '1');
        enterApp();
      });

      // Buy Pro — open Gumroad checkout
      document.getElementById('ctaPro').addEventListener('click', function() {
        window.open('https://lumina888.gumroad.com/l/pptpp', '_blank');
      });

      // Activate Pro Code (async — supports online Gumroad verification)
      document.getElementById('proCodeSubmit').addEventListener('click', async function() {
        var input = document.getElementById('proCodeInput');
        var error = document.getElementById('proCodeError');
        var btn = document.getElementById('proCodeSubmit');
        btn.textContent = 'Verifying...';
        btn.disabled = true;
        error.textContent = '';
        try {
          var result = await proGate.activate(input.value);
          if (result.success) {
            enterApp();
          } else {
            error.textContent = result.error;
            input.value = '';
            input.focus();
          }
        } catch (e) {
          error.textContent = 'Verification failed. Try again.';
        }
        btn.textContent = 'Activate';
        btn.disabled = false;
      });

      document.getElementById('proCodeInput').addEventListener('keydown', function(e) {
        if (e.key === 'Enter') document.getElementById('proCodeSubmit').click();
      });
      } catch (err) { console.warn('Landing page init error:', err); }
    })();
  </script>

</body>
</html>
